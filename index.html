<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>brand-journey-tracker</title>
    <meta name="description" content="Lovable Generated Project" />
    <meta name="author" content="Lovable" />
    <meta property="og:image" content="/og-image.png" />
  </head>

  <body>
    <div id="root"></div>
    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
    <script>
      // Ensure WebSocket connections don't keep retrying infinitely
      window.addEventListener('error', function(event) {
        if (event.message && event.message.includes('WebSocket')) {
          console.warn('WebSocket connection issue detected');
        }
      });
      
      // White screen detection
      document.addEventListener('DOMContentLoaded', function() {
        // Start a timer to check if the app has rendered properly
        setTimeout(function() {
          var root = document.getElementById('root');
          // If the root element is empty or only has the script tags
          if (root && (root.children.length === 0 || 
              (root.children.length === 1 && root.children[0].tagName === 'SCRIPT'))) {
            console.error('White screen detected - app failed to render');
            root.innerHTML = `
              <div style="padding: 20px; text-align: center; font-family: system-ui, sans-serif;">
                <h1 style="color: #e11d48;">Application Failed to Load</h1>
                <p>The application is taking too long to start.</p>
                <button style="background: #3b82f6; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin-top: 20px;" 
                        onclick="localStorage.clear(); window.location.reload();">
                  Clear Data & Reload
                </button>
              </div>
            `;
          }
        }, 10000); // 10 seconds timeout
      });
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
